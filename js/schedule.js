(()=>{let m={orderBy:"startTime",showLocation:!1,offsetMax:72,offsetMin:4,showDeleted:!1,singleEvents:!0,maxResults:250},v=(Object.assign(m,CONFIG.calendar),new Date);var e=new Date,t=new Date,e=(e.setHours(v.getHours()+m.offsetMax),t.setHours(v.getHours()-m.offsetMin),{key:m.api_key,orderBy:m.orderBy,timeMax:e.toISOString(),timeMin:t.toISOString(),showDeleted:m.showDeleted,singleEvents:m.singleEvents,maxResults:m.maxResults});let a=new URL(`https://www.googleapis.com/calendar/v3/calendars/${m.calendar_id}/events`);function i(e,t,a,n){var s,r,o,i,l={weekday:"short",hour:"2-digit",minute:"2-digit"},d="now"===e?"NOW":(s=v,o=30*(c=24*(d=36e5)),i=365*c,r=0<(s=s-(r=a))?" ago":" later",(s=Math.abs(s))<d?Math.round(s/6e4)+" minutes"+r:s<c?Math.round(s/d)+" hours"+r:s<o?"about "+Math.round(s/c)+" days"+r:s<i?"about "+Math.round(s/o)+" months"+r:"about "+Math.round(s/i)+" years"+r),c=a.toLocaleTimeString([],l)+" - "+n.toLocaleTimeString([],l);let u="",h=(m.showLocation&&t.location&&(u=`<span class="event-location event-details">${t.location}</span>`),"");return t.description&&(h=`<span class="event-description event-details">${t.description}</span>`),`<section class="event event-${e}">
        <h2 class="event-summary">
          ${t.summary}
          <span class="event-relative-time">${d}</span>
        </h2>
        ${u}
        <span class="event-duration event-details">${c}</span>
        ${h}
      </section>`}async function n(){let o=document.querySelector(".event-list");if(o)try{var e=await(await fetch(a.href)).json();if(0===e.items.length)o.innerHTML="<hr>";else{o.innerHTML="";let s=0,r=6e4*(new Date).getTimezoneOffset();e.items.forEach(e=>{var t=new Date(e.start.dateTime||new Date(e.start.date).getTime()+r),a=new Date(e.end.dateTime||new Date(e.end.date).getTime()+r);let n="now";a<v?n="past":t>v&&(n="future"),"future"===n&&s<v&&o.insertAdjacentHTML("beforeend","<hr>"),o.insertAdjacentHTML("beforeend",i(n,e,t,a)),s=a})}}catch(e){console.error("Error fetching calendar data:",e)}}Object.entries(e).forEach(e=>a.searchParams.append(...e)),n();let s=setInterval(n,6e4);document.addEventListener("pjax:send",()=>{clearInterval(s)})})();