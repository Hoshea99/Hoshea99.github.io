firebase.initializeApp({apiKey:CONFIG.firestore.apiKey,projectId:CONFIG.firestore.projectId}),(()=>{let i=async(e,t)=>{var o=await e.get();let r=o.exists?o.data().count:0;return t&&(r++,e.set({count:r})),r},a=firebase.firestore().collection(CONFIG.firestore.collection);document.addEventListener("page:loaded",async()=>{if(CONFIG.page.isPost){var t=document.querySelector(".post-title").textContent.trim(),r=a.doc(t);let e=CONFIG.hostname===location.hostname;localStorage.getItem(t)?e=!1:localStorage.setItem(t,!0);t=await i(r,e);document.querySelector(".firestore-visitors-count").innerText=t}else if(CONFIG.page.isHome){r=[...document.querySelectorAll(".post-title")].map(e=>{e=e.textContent.trim(),e=a.doc(e);return i(e)}),t=await Promise.all(r);let o=document.querySelectorAll(".firestore-visitors-count");t.forEach((e,t)=>{o[t].innerText=e})}})})();